<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Expr (dolmen.Dolmen_std.Expr)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">dolmen</a> &#x00BB; <a href="../index.html">Dolmen_std</a> &#x00BB; Expr</nav><header class="odoc-preamble"><h1>Module <code><span>Dolmen_std.Expr</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#type-definitions">Type definitions</a><ul><li><a href="#common-definitions">Common definitions</a></li><li><a href="#type-definitions_2">Type definitions</a></li></ul></li><li><a href="#exceptions">Exceptions</a></li><li><a href="#native-tags">Native Tags</a></li><li><a href="#printing">Printing</a></li><li><a href="#substitutions">Substitutions</a></li><li><a href="#identifiers">Identifiers</a></li><li><a href="#types">Types</a></li><li><a href="#terms">Terms</a></li></ul></nav><div class="odoc-content"><h3 id="type-definitions"><a href="#type-definitions" class="anchor"></a>Type definitions</h3><h4 id="common-definitions"><a href="#common-definitions" class="anchor"></a>Common definitions</h4><div class="odoc-spec"><div class="spec type anchored" id="type-hash"><a href="#type-hash" class="anchor"></a><code><span><span class="keyword">type</span> hash</span><span> = <span class="keyword">private</span> int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-index"><a href="#type-index" class="anchor"></a><code><span><span class="keyword">type</span> index</span><span> = <span class="keyword">private</span> int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-tag"><a href="#type-tag" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a tag</span></span><span> = <span><span class="type-var">'a</span> <a href="../Tag/index.html#type-t">Tag.t</a></span></span></code></div></div><h4 id="type-definitions_2"><a href="#type-definitions_2" class="anchor"></a>Type definitions</h4><div class="odoc-spec"><div class="spec type anchored" id="type-builtin"><a href="#type-builtin" class="anchor"></a><code><span><span class="keyword">type</span> builtin</span><span> =
  <span><span>&lt; ty : <a href="#type-ty">ty</a>
    ; ty_var : <a href="#type-ty_var">ty_var</a>
    ; ty_cst : <a href="#type-ty_cst">ty_cst</a>
    ; term : <a href="#type-term">term</a>
    ; term_var : <a href="#type-term_var">term_var</a>
    ; term_cst : <a href="#type-term_cst">term_cst</a> &gt;</span>
    <a href="../Builtin/index.html#type-t">Builtin.t</a></span></span></code></div><div class="spec-doc"><p>Extensible variant type for builtin operations.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-id"><a href="#type-id" class="anchor"></a><code><span><span class="keyword">and</span> <span>'ty id</span></span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-id.id_ty" class="def record field anchored"><a href="#type-id.id_ty" class="anchor"></a><code><span>id_ty : <span class="type-var">'ty</span>;</span></code></li><li id="type-id.index" class="def record field anchored"><a href="#type-id.index" class="anchor"></a><code><span>index : <a href="#type-index">index</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>unique index</p><span class="comment-delim">*)</span></div></li><li id="type-id.path" class="def record field anchored"><a href="#type-id.path" class="anchor"></a><code><span>path : <a href="../Path/index.html#type-t">Path.t</a>;</span></code></li><li id="type-id.builtin" class="def record field anchored"><a href="#type-id.builtin" class="anchor"></a><code><span>builtin : <a href="#type-builtin">builtin</a>;</span></code></li><li id="type-id.tags" class="def record field anchored"><a href="#type-id.tags" class="anchor"></a><code><span><span class="keyword">mutable</span> tags : <a href="../Tag/index.html#type-map">Tag.map</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The type of identifiers. <code>'ty</code> is the type for representing the type of the id.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_"><a href="#type-type_" class="anchor"></a><code><span><span class="keyword">and</span> type_</span><span> = </span></code><ol><li id="type-type_.Type" class="def variant constructor anchored"><a href="#type-type_.Type" class="anchor"></a><code><span>| </span><span><span class="constructor">Type</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_fun"><a href="#type-type_fun" class="anchor"></a><code><span><span class="keyword">and</span> type_fun</span><span> = </span><span>{</span></code><ol><li id="type-type_fun.arity" class="def record field anchored"><a href="#type-type_fun.arity" class="anchor"></a><code><span>arity : int;</span></code></li><li id="type-type_fun.alias" class="def record field anchored"><a href="#type-type_fun.alias" class="anchor"></a><code><span><span class="keyword">mutable</span> alias : <a href="#type-type_alias">type_alias</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_alias"><a href="#type-type_alias" class="anchor"></a><code><span><span class="keyword">and</span> type_alias</span><span> = </span></code><ol><li id="type-type_alias.No_alias" class="def variant constructor anchored"><a href="#type-type_alias.No_alias" class="anchor"></a><code><span>| </span><span><span class="constructor">No_alias</span></span></code></li><li id="type-type_alias.Alias" class="def variant constructor anchored"><a href="#type-type_alias.Alias" class="anchor"></a><code><span>| </span><span><span class="constructor">Alias</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-type_alias.alias_vars" class="def record field anchored"><a href="#type-type_alias.alias_vars" class="anchor"></a><code><span>alias_vars : <span><a href="#type-ty_var">ty_var</a> list</span>;</span></code></li><li id="type-type_alias.alias_body" class="def record field anchored"><a href="#type-type_alias.alias_body" class="anchor"></a><code><span>alias_body : <a href="#type-ty">ty</a>;</span></code></li></ol><code><span>}</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty_var"><a href="#type-ty_var" class="anchor"></a><code><span><span class="keyword">and</span> ty_var</span><span> = <span><a href="#type-type_">type_</a> <a href="#type-id">id</a></span></span></code></div><div class="spec-doc"><p>Abbreviation for type variables.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty_cst"><a href="#type-ty_cst" class="anchor"></a><code><span><span class="keyword">and</span> ty_cst</span><span> = <span><a href="#type-type_fun">type_fun</a> <a href="#type-id">id</a></span></span></code></div><div class="spec-doc"><p>Type symbols have the expected length of their argument encoded.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty_descr"><a href="#type-ty_descr" class="anchor"></a><code><span><span class="keyword">and</span> ty_descr</span><span> = </span></code><ol><li id="type-ty_descr.TyVar" class="def variant constructor anchored"><a href="#type-ty_descr.TyVar" class="anchor"></a><code><span>| </span><span><span class="constructor">TyVar</span> <span class="keyword">of</span> <a href="#type-ty_var">ty_var</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type variables</p><span class="comment-delim">*)</span></div></li><li id="type-ty_descr.TyApp" class="def variant constructor anchored"><a href="#type-ty_descr.TyApp" class="anchor"></a><code><span>| </span><span><span class="constructor">TyApp</span> <span class="keyword">of</span> <a href="#type-ty_cst">ty_cst</a> * <span><a href="#type-ty">ty</a> list</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Application</p><span class="comment-delim">*)</span></div></li><li id="type-ty_descr.Arrow" class="def variant constructor anchored"><a href="#type-ty_descr.Arrow" class="anchor"></a><code><span>| </span><span><span class="constructor">Arrow</span> <span class="keyword">of</span> <span><a href="#type-ty">ty</a> list</span> * <a href="#type-ty">ty</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Function type</p><span class="comment-delim">*)</span></div></li><li id="type-ty_descr.Pi" class="def variant constructor anchored"><a href="#type-ty_descr.Pi" class="anchor"></a><code><span>| </span><span><span class="constructor">Pi</span> <span class="keyword">of</span> <span><a href="#type-ty_var">ty_var</a> list</span> * <a href="#type-ty">ty</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type quantification</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Type descriptions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty"><a href="#type-ty" class="anchor"></a><code><span><span class="keyword">and</span> ty</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-ty.ty_hash" class="def record field anchored"><a href="#type-ty.ty_hash" class="anchor"></a><code><span><span class="keyword">mutable</span> ty_hash : <a href="#type-hash">hash</a>;</span></code></li><li id="type-ty.ty_tags" class="def record field anchored"><a href="#type-ty.ty_tags" class="anchor"></a><code><span><span class="keyword">mutable</span> ty_tags : <a href="../Tag/index.html#type-map">Tag.map</a>;</span></code></li><li id="type-ty.ty_descr" class="def record field anchored"><a href="#type-ty.ty_descr" class="anchor"></a><code><span><span class="keyword">mutable</span> ty_descr : <a href="#type-ty_descr">ty_descr</a>;</span></code></li><li id="type-ty.ty_head" class="def record field anchored"><a href="#type-ty.ty_head" class="anchor"></a><code><span><span class="keyword">mutable</span> ty_head : <a href="#type-ty">ty</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Types, which wrap type description with a memoized hash and some tags.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-term_var"><a href="#type-term_var" class="anchor"></a><code><span><span class="keyword">and</span> term_var</span><span> = <span><a href="#type-ty">ty</a> <a href="#type-id">id</a></span></span></code></div><div class="spec-doc"><p>Term variables</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-term_cst"><a href="#type-term_cst" class="anchor"></a><code><span><span class="keyword">and</span> term_cst</span><span> = <span><a href="#type-ty">ty</a> <a href="#type-id">id</a></span></span></code></div><div class="spec-doc"><p>Term symbols, which encode their expected type and term argument lists lengths.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-pattern"><a href="#type-pattern" class="anchor"></a><code><span><span class="keyword">and</span> pattern</span><span> = <a href="#type-term">term</a></span></code></div><div class="spec-doc"><p>patterns are simply terms</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-term_descr"><a href="#type-term_descr" class="anchor"></a><code><span><span class="keyword">and</span> term_descr</span><span> = </span></code><ol><li id="type-term_descr.Var" class="def variant constructor anchored"><a href="#type-term_descr.Var" class="anchor"></a><code><span>| </span><span><span class="constructor">Var</span> <span class="keyword">of</span> <a href="#type-term_var">term_var</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Variables</p><span class="comment-delim">*)</span></div></li><li id="type-term_descr.Cst" class="def variant constructor anchored"><a href="#type-term_descr.Cst" class="anchor"></a><code><span>| </span><span><span class="constructor">Cst</span> <span class="keyword">of</span> <a href="#type-term_cst">term_cst</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Constants</p><span class="comment-delim">*)</span></div></li><li id="type-term_descr.App" class="def variant constructor anchored"><a href="#type-term_descr.App" class="anchor"></a><code><span>| </span><span><span class="constructor">App</span> <span class="keyword">of</span> <a href="#type-term">term</a> * <span><a href="#type-ty">ty</a> list</span> * <span><a href="#type-term">term</a> list</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Application</p><span class="comment-delim">*)</span></div></li><li id="type-term_descr.Binder" class="def variant constructor anchored"><a href="#type-term_descr.Binder" class="anchor"></a><code><span>| </span><span><span class="constructor">Binder</span> <span class="keyword">of</span> <a href="#type-binder">binder</a> * <a href="#type-term">term</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Binders</p><span class="comment-delim">*)</span></div></li><li id="type-term_descr.Match" class="def variant constructor anchored"><a href="#type-term_descr.Match" class="anchor"></a><code><span>| </span><span><span class="constructor">Match</span> <span class="keyword">of</span> <a href="#type-term">term</a> * <span><span>(<a href="#type-pattern">pattern</a> * <a href="#type-term">term</a>)</span> list</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Pattern matching</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Term descriptions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-binder"><a href="#type-binder" class="anchor"></a><code><span><span class="keyword">and</span> binder</span><span> = </span></code><ol><li id="type-binder.Let_seq" class="def variant constructor anchored"><a href="#type-binder.Let_seq" class="anchor"></a><code><span>| </span><span><span class="constructor">Let_seq</span> <span class="keyword">of</span> <span><span>(<a href="#type-term_var">term_var</a> * <a href="#type-term">term</a>)</span> list</span></span></code></li><li id="type-binder.Let_par" class="def variant constructor anchored"><a href="#type-binder.Let_par" class="anchor"></a><code><span>| </span><span><span class="constructor">Let_par</span> <span class="keyword">of</span> <span><span>(<a href="#type-term_var">term_var</a> * <a href="#type-term">term</a>)</span> list</span></span></code></li><li id="type-binder.Lambda" class="def variant constructor anchored"><a href="#type-binder.Lambda" class="anchor"></a><code><span>| </span><span><span class="constructor">Lambda</span> <span class="keyword">of</span> <span><a href="#type-ty_var">ty_var</a> list</span> * <span><a href="#type-term_var">term_var</a> list</span></span></code></li><li id="type-binder.Exists" class="def variant constructor anchored"><a href="#type-binder.Exists" class="anchor"></a><code><span>| </span><span><span class="constructor">Exists</span> <span class="keyword">of</span> <span><a href="#type-ty_var">ty_var</a> list</span> * <span><a href="#type-term_var">term_var</a> list</span></span></code></li><li id="type-binder.Forall" class="def variant constructor anchored"><a href="#type-binder.Forall" class="anchor"></a><code><span>| </span><span><span class="constructor">Forall</span> <span class="keyword">of</span> <span><a href="#type-ty_var">ty_var</a> list</span> * <span><a href="#type-term_var">term_var</a> list</span></span></code></li></ol></div><div class="spec-doc"><p>Binders.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-term"><a href="#type-term" class="anchor"></a><code><span><span class="keyword">and</span> term</span><span> = </span><span>{</span></code><ol><li id="type-term.term_ty" class="def record field anchored"><a href="#type-term.term_ty" class="anchor"></a><code><span>term_ty : <a href="#type-ty">ty</a>;</span></code></li><li id="type-term.term_descr" class="def record field anchored"><a href="#type-term.term_descr" class="anchor"></a><code><span>term_descr : <a href="#type-term_descr">term_descr</a>;</span></code></li><li id="type-term.term_hash" class="def record field anchored"><a href="#type-term.term_hash" class="anchor"></a><code><span><span class="keyword">mutable</span> term_hash : <a href="#type-hash">hash</a>;</span></code></li><li id="type-term.term_tags" class="def record field anchored"><a href="#type-term.term_tags" class="anchor"></a><code><span><span class="keyword">mutable</span> term_tags : <a href="../Tag/index.html#type-map">Tag.map</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Term, which wrap term descriptions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-formula"><a href="#type-formula" class="anchor"></a><code><span><span class="keyword">and</span> formula</span><span> = <a href="#type-term">term</a></span></code></div><div class="spec-doc"><p>Alias for signature compatibility (with Dolmen_loop.Pipes.Make for instance).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty_def_adt_case"><a href="#type-ty_def_adt_case" class="anchor"></a><code><span><span class="keyword">type</span> ty_def_adt_case</span><span> = </span><span>{</span></code><ol><li id="type-ty_def_adt_case.cstr" class="def record field anchored"><a href="#type-ty_def_adt_case.cstr" class="anchor"></a><code><span>cstr : <a href="#type-term_cst">term_cst</a>;</span></code></li><li id="type-ty_def_adt_case.tester" class="def record field anchored"><a href="#type-ty_def_adt_case.tester" class="anchor"></a><code><span>tester : <a href="#type-term_cst">term_cst</a>;</span></code></li><li id="type-ty_def_adt_case.dstrs" class="def record field anchored"><a href="#type-ty_def_adt_case.dstrs" class="anchor"></a><code><span>dstrs : <span><span><a href="#type-term_cst">term_cst</a> option</span> array</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>One case of the type definition for an algebraic datatype.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty_def"><a href="#type-ty_def" class="anchor"></a><code><span><span class="keyword">type</span> ty_def</span><span> = </span></code><ol><li id="type-ty_def.Abstract" class="def variant constructor anchored"><a href="#type-ty_def.Abstract" class="anchor"></a><code><span>| </span><span><span class="constructor">Abstract</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Abstract types</p><span class="comment-delim">*)</span></div></li><li id="type-ty_def.Adt" class="def variant constructor anchored"><a href="#type-ty_def.Adt" class="anchor"></a><code><span>| </span><span><span class="constructor">Adt</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-ty_def.ty" class="def record field anchored"><a href="#type-ty_def.ty" class="anchor"></a><code><span>ty : <a href="#type-ty_cst">ty_cst</a>;</span></code></li><li id="type-ty_def.record" class="def record field anchored"><a href="#type-ty_def.record" class="anchor"></a><code><span>record : bool;</span></code></li><li id="type-ty_def.cases" class="def record field anchored"><a href="#type-ty_def.cases" class="anchor"></a><code><span>cases : <span><a href="#type-ty_def_adt_case">ty_def_adt_case</a> array</span>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Algebraic datatypes, including records (which are seen as a 1-case adt).</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Type definitions.</p></div></div><h3 id="exceptions"><a href="#exceptions" class="anchor"></a>Exceptions</h3><div class="odoc-spec"><div class="spec exception anchored" id="exception-Already_aliased"><a href="#exception-Already_aliased" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Already_aliased</span> <span class="keyword">of</span> <a href="#type-ty_cst">ty_cst</a></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Type_already_defined"><a href="#exception-Type_already_defined" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Type_already_defined</span> <span class="keyword">of</span> <a href="#type-ty_cst">ty_cst</a></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Record_type_expected"><a href="#exception-Record_type_expected" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Record_type_expected</span> <span class="keyword">of</span> <a href="#type-ty_cst">ty_cst</a></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Wildcard_already_set"><a href="#exception-Wildcard_already_set" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Wildcard_already_set</span> <span class="keyword">of</span> <a href="#type-ty_var">ty_var</a></span></code></div></div><h3 id="native-tags"><a href="#native-tags" class="anchor"></a>Native Tags</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Tags"><a href="#module-Tags" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Tags/index.html">Tags</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="printing"><a href="#printing" class="anchor"></a>Printing</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Print"><a href="#module-Print" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Print/index.html">Print</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="substitutions"><a href="#substitutions" class="anchor"></a>Substitutions</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Subst"><a href="#module-Subst" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Subst/index.html">Subst</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module to handle substitutions</p></div></div><h3 id="identifiers"><a href="#identifiers" class="anchor"></a>Identifiers</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Id"><a href="#module-Id" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Id/index.html">Id</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="types"><a href="#types" class="anchor"></a>Types</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Ty"><a href="#module-Ty" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ty/index.html">Ty</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="terms"><a href="#terms" class="anchor"></a>Terms</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Term"><a href="#module-Term" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Term/index.html">Term</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Signature required by terms for typing first-order polymorphic terms.</p></div></div></div></body></html>